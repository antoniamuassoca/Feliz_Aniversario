<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8" />
  <title>Para F√°bia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap"
    rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      animation: bgColors 18s infinite alternate;
    }

    @keyframes bgColors {
      0% {
        background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      }

      25% {
        background: linear-gradient(135deg, #a18cd1, #fbc2eb);
      }

      50% {
        background: linear-gradient(135deg, #84fab0, #8fd3f4);
      }

      75% {
        background: linear-gradient(135deg, #f6d365, #fda085);
      }

      100% {
        background: linear-gradient(135deg, #ff758c, #ff7eb3);
      }
    }

    .site {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-radius: 32px;
      width: 92%;
      max-width: 480px;
      box-shadow: 0 30px 60px rgba(0, 0, 0, 0.25);
      overflow: hidden;
      animation: fadeIn 1.8s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }

      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    nav {
      display: flex;
      justify-content: space-around;
      background: linear-gradient(135deg, #ff4d6d, #ff758f);
      padding: 12px;
    }

    nav button {
      background: transparent;
      border: none;
      color: white;
      font-weight: 600;
      cursor: pointer;
      font-size: 14px;
      transition: transform 0.2s ease;
    }

    nav button:hover {
      transform: scale(1.1);
    }

    .page {
      display: none;
      padding: 36px 28px 42px;
      text-align: center;
    }

    .page.active {
      display: block;
    }

    .title {
      font-family: 'Great Vibes', cursive;
      font-size: 52px;
      color: #ff4d6d;
      margin-bottom: 12px;
    }

    .subtitle {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 14px;
      color: #333;
    }

    .message {
      font-size: 15px;
      color: #555;
      line-height: 1.7;
    }

    .balloon {
      font-size: 48px;
      margin-bottom: 10px;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-14px);
      }
    }

    /* ‚úÖ CARROSSEL DA GALERIA */
    .carousel-container {
      position: relative;
      width: 100%;
      height: 590px;
      overflow: hidden;
      border-radius: 22px;
      margin-top: 20px;
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.25);
    }

    .carousel {
      width: 100%;
      height: 100%;
      position: relative;
    }

    .slide {
      position: absolute;
      inset: 0;
      opacity: 0;
      transition: opacity 2s ease-in-out;
      display: flex;
      flex-direction: column;
      justify-content: end;
    }

    .slide.active {
      opacity: 1;
    }

    .slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .slide p {
      background: rgba(255, 77, 109, 0.75);
      color: white;
      padding: 12px;
      font-size: 14px;
      font-weight: 600;
      text-align: center;
    }

    .button {
      display: inline-block;
      margin-top: 24px;
      background: linear-gradient(135deg, #ff4d6d, #ff758f);
      color: white;
      padding: 14px 30px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      box-shadow: 0 10px 25px rgba(255, 77, 109, 0.5);
    }

    .heart {
      position: absolute;
      color: rgba(255, 79, 109, 0.3);
      font-size: 18px;
      animation: hearts 6s linear infinite;
    }

    @keyframes hearts {
      0% {
        transform: translateY(100vh) scale(0.5);
        opacity: 0;
      }

      40% {
        opacity: 1;
      }

      100% {
        transform: translateY(-10vh) scale(1.2);
        opacity: 0;
      }
    }

    /* ‚úÖ RESPONSIVIDADE PARA TODOS OS ECR√ÉS */
    @media (max-width: 600px) {
      .site {
        width: 96%;
        border-radius: 22px;
      }

      .title {
        font-size: 40px;
      }

      .subtitle {
        font-size: 17px;
      }

      .message {
        font-size: 14px;
      }

      nav button {
        font-size: 12px;
      }

      .foto {
        height: 110px;
      }
    }

    @media (max-width: 400px) {
      .title {
        font-size: 34px;
      }

      .balloon {
        font-size: 38px;
      }

      .button {
        padding: 12px 22px;
        font-size: 13px;
      }

      nav {
        flex-wrap: wrap;
        gap: 6px;
      }
    }
  </style>
</head>

<body>

  <div class="site">
    <nav>
      <button onclick="showPage('home')">üè† In√≠cio</button>
      <button onclick="showPage('mensagem')">üíå Mensagem</button>
      <button onclick="showPage('galeria')">üñº Galeria</button>
      <button onclick="showPage('surpresa')">üéÅ Surpresa</button>
    </nav>

    <!-- P√ÅGINA 1 -->
    <div id="home" class="page active">
      <div class="balloon">üéàüéÇüéÅ</div>
      <h1 class="title">Feliz Anivers√°rio</h1>
      <div class="subtitle">F√°bia, Minha Amiga Especial ‚ù§Ô∏è</div>
      <p class="message">Este site foi feito com muito carinho s√≥ para voc√™ ‚ú®</p>
    </div>

    <!-- P√ÅGINA 2 -->
    <div id="mensagem" class="page">
      <h2 class="subtitle">Mensagens Para Voc√™, F√°bia üíñ</h2>
      <p class="message" id="mensagemRotativa"></p>
      <a href="#" class="button" onclick="proximaMensagem(); return false;">‚ú® Ver Outra Mensagem</a>
    </div>

    <!-- P√ÅGINA 3 -->
    <!-- ‚úÖ GALERIA EM CARROSSEL -->
    <div id="galeria" class="page">
      <h2 class="subtitle">Nossos Momentos üì∏</h2>

      <div class="carousel-container">
        <div class="carousel">
          <div class="slide active">
            <img src="img/01.jpg">
            <p>‚ú® Seu sorriso ilumina qualquer dia escuro.</p>
          </div>
          <div class="slide">
            <img src="img/02.jpg">
            <p>üíñ Cada momento ao seu lado √© um presente.</p>
          </div>
          <div class="slide">
            <img src="img/03.jpg">
            <p>üéÇ Que todos os teus sonhos se realizem.</p>
          </div>
          <div class="slide">
            <img src="img/04.jpg">
            <p>üåà A sua alegria √© contagiante.</p>
          </div>
          <div class="slide active">
            <img src="img/05.jpg">
            <p>üíù Que a tua vida seja sempre feliz.</p>
          </div>
          <div class="slide">
            <img src="img/06.JPG">
            <p>‚ú® Estar contigo √© sempre especial‚Ä¶ at√© quando reclamas! üòÇ</p>
          </div>
          <div class="slide">
            <img src="img/07.jpg">
            <p>üòè Orgulhosa? Um pouco. Mas ainda assim √©s um doce disfar√ßado de durona.</p>
          </div>
          <div class="slide">
            <img src="img/08.JPG">
            <p>üåà A sua alegria √© contagiante.</p>
          </div>
          <div class="slide active">
            <img src="img/09.jpg">
            <p>Teu jeito frio engana, porque tua alma √© quentinha e cheia de luz.</p>
          </div>
          <div class="slide">
            <img src="img/10.JPG">
            <p>üå∏ Fazes-te de forte e insens√≠vel‚Ä¶ mas eu sei que √©s puro sentimento.</p>
          </div>
          <div class="slide">
            <img src="img/11.JPG">
            <p>Dizes que √©s fria‚Ä¶ mas teu cora√ß√£o derrete com facilidade (s√≥ n√£o gostas de admitir).</p>
          </div>
          <div class="slide">
            <img src="img/12.HEIC">
            <p>üéÇ Que a vida te prove todos os dias que n√£o precisas esconder esse teu cora√ß√£o bonito.</p>
          </div>
        </div>
      </div>

      <a href="#" class="button" onclick="showPage('home')">‚¨Ö Voltar ao In√≠cio</a>
    </div>

    <!-- P√ÅGINA 4 -->
    <!-- ======= SUBSTITUIR AQUI: div id="surpresa" ======= -->
    <div id="surpresa" class="page">
      <style>
        /* Estilos espec√≠ficos para a surpresa (mant√©m o look do teu site) */
        #surpresa .card {
          background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.9));
          border-radius: 20px;
          padding: 22px;
          box-shadow: 0 18px 40px rgba(0, 0, 0, 0.15);
          text-align: center;
          max-width: 460px;
          margin: 0 auto;
          position: relative;
          overflow: visible;
        }

        #surpresa .big-title {
          font-family: 'Great Vibes', cursive;
          font-size: 44px;
          color: #e85b8d;
          margin-bottom: 6px;
        }

        #surpresa .lead {
          font-size: 15px;
          color: #444;
          margin-bottom: 18px;
        }

        #surpresa .steps {
          display: grid;
          gap: 12px;
          margin-top: 10px;
        }

        .surp-btn {
          display: inline-block;
          padding: 10px 16px;
          border-radius: 999px;
          background: linear-gradient(135deg, #ff8aa0, #ff5c8a);
          color: #fff;
          border: none;
          cursor: pointer;
          font-weight: 700;
          box-shadow: 0 8px 20px rgba(255, 92, 138, 0.25);
          transition: transform .14s ease;
        }

        .surp-btn:active {
          transform: translateY(2px);
        }

        .choice {
          background: rgba(255, 245, 250, 0.9);
          border-radius: 12px;
          padding: 12px;
          cursor: pointer;
          border: 1px solid rgba(232, 91, 141, 0.12);
          transition: transform .12s ease, box-shadow .12s ease;
        }

        .choice:hover {
          transform: translateY(-6px);
          box-shadow: 0 14px 30px rgba(232, 91, 141, 0.08);
        }

        .hidden {
          display: none !important;
        }

        /* emotive reveal */
        .reveal {
          opacity: 0;
          transform: translateY(8px) scale(.995);
          transition: all 700ms cubic-bezier(.2, .9, .2, 1);
        }

        .reveal.show {
          opacity: 1;
          transform: translateY(0) scale(1);
        }

        /* soft overlay & effect */
        #surpresa .overlay {
          position: absolute;
          inset: 0;
          pointer-events: none;
          border-radius: 20px;
        }

        /* confetti canvas full-size inside page */
        #confettiCanvas {
          position: fixed;
          left: 0;
          top: 0;
          width: 100vw;
          height: 100vh;
          pointer-events: none;
          z-index: 9999;
        }

        /* final buttons */
        .final-actions {
          display: flex;
          gap: 10px;
          justify-content: center;
          margin-top: 14px;
          flex-wrap: wrap;
        }

        .ghost-btn {
          background: transparent;
          color: #e85b8d;
          border: 2px solid rgba(232, 91, 141, 0.18);
          padding: 8px 14px;
          border-radius: 12px;
          font-weight: 700;
          cursor: pointer;
        }

        /* small responsive */
        @media (max-width:420px) {
          #surpresa .big-title {
            font-size: 36px;
          }

          .surp-btn {
            padding: 10px 12px;
          }
        }

        /* ===== AJUSTE TOTAL RESPONSIVO DA SURPRESA ===== */

        #surpresa {
          padding: 18px 12px;
        }

        #surpresa .card {
          width: 100%;
          max-width: 520px;
          margin: 0 auto;
          padding: 18px 16px;
          border-radius: clamp(16px, 4vw, 24px);
        }

        /* T√çTULO FLUIDO */
        #surpresa .big-title {
          font-size: clamp(28px, 6vw, 46px);
          line-height: 1.1;
        }

        /* TEXTO FLUIDO */
        #surpresa .lead,
        #finalText p {
          font-size: clamp(13px, 3.2vw, 16px);
          line-height: 1.6;
        }

        /* BOT√ïES RESPONSIVOS */
        .surp-btn,
        .ghost-btn {
          font-size: clamp(12px, 3vw, 14px);
          padding: 10px 16px;
          min-width: 120px;
        }

        /* CHOICES FLEX√çVEIS */
        #surpresa .steps {
          width: 100%;
        }

        #surpresa .choice {
          width: 100%;
          max-width: 100%;
          font-size: clamp(13px, 3.2vw, 15px);
        }

        /* BOLO FINAL AJUST√ÅVEL */
        #cake {
          width: min(80vw, 240px) !important;
          height: auto !important;
          padding: 16px !important;
        }

        /* CANVAS SEM ESTOURAR EM TELEM√ìVEL */
        #confettiCanvas {
          width: 100vw !important;
          height: 100vh !important;
        }

        /* ===== TELEFONES MUITO PEQUENOS ===== */
        @media (max-width: 360px) {
          #surpresa .big-title {
            font-size: 26px;
          }

          .surp-btn,
          .ghost-btn {
            padding: 8px 14px;
            font-size: 12px;
          }
        }

        /* ===== TABLETS ===== */
        @media (min-width: 600px) {
          #surpresa {
            padding: 26px;
          }

          #surpresa .card {
            padding: 28px;
          }
        }

        /* ===== DESKTOP GRANDE ===== */
        @media (min-width: 1024px) {
          #surpresa .card {
            max-width: 620px;
          }

          #surpresa .big-title {
            font-size: 52px;
          }
        }
      </style>

      <div class="card" role="region" aria-labelledby="surpresaTitle" aria-describedby="surpresaDesc">
        <div id="surpresaTitle" class="big-title">O Cora√ß√£o Por Tr√°s da Armadura</div>
        <div id="surpresaDesc" class="lead">F√°bia ‚Äî uma pequena jornada para mostrar o quanto √©s querida. Escolhe com o
          cora√ß√£o üíñ</div>

        <!-- ETAPAS -->
        <div id="stage-1" class="steps reveal show" aria-hidden="false">
          <div class="choice" tabindex="0" data-answer="A">‚ÄúSou forte porque nunca chorei.‚Äù</div>
          <div class="choice" tabindex="0" data-answer="B">‚ÄúSou forte porque j√° chorei muito‚Ä¶ e continuei.‚Äù</div>
          <div class="choice" tabindex="0" data-answer="C">‚ÄúSou forte porque n√£o sinto nada.‚Äù</div>
        </div>

        <div id="stage-2" class="steps reveal hidden" aria-hidden="true">
          <div class="lead">Escolhe o sabor que traduz o teu cora√ß√£o</div>
          <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
            <div class="choice" tabindex="0" data-answer="sour">üçã Azedo</div>
            <div class="choice" tabindex="0" data-answer="bitter">üç´ Amargo</div>
            <div class="choice" tabindex="0" data-answer="sweet">üçì Doce</div>
          </div>
        </div>

        <div id="stage-3" class="steps reveal hidden" aria-hidden="true">
          <div class="lead">Por que usas a armadura?</div>
          <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
            <div class="choice" tabindex="0" data-answer="notfeel">Para n√£o sentir</div>
            <div class="choice" tabindex="0" data-answer="protect">Para me proteger</div>
            <div class="choice" tabindex="0" data-answer="habit">Porque sou assim</div>
          </div>
        </div>

        <div id="final-stage" class="reveal hidden" aria-hidden="true" style="padding-top:8px;">
          <div id="finalReveal"
            style="min-height:170px; display:flex;flex-direction:column;align-items:center;justify-content:center;">
            <!-- Visual cake animation -->
            <div id="cake"
              style="width:220px;height:160px;border-radius:18px;background:linear-gradient(180deg,#fff7fb,#fff0f6);box-shadow:0 10px 30px rgba(232,91,141,0.08);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:14px;">
              <div style="font-size:26px;">üéÇ</div>
              <div id="smallLine" style="font-weight:700;color:#e85b8d;margin-top:6px">Bolo da F√°bia</div>
            </div>

            <div id="finalText" style="margin-top:12px;max-width:380px;" aria-live="polite"></div>

            <div class="final-actions" style="margin-top:10px;">
              <button class="ghost-btn" id="btn-prayer" aria-label="Ora√ß√£o e b√™n√ß√£o">üôè Ora√ß√£o & B√™n√ß√£o</button>
              <button class="ghost-btn" id="btn-ty" aria-label="Agradecimento">üíå Agradecer</button>
              <button class="surp-btn" id="btn-back" style="display:none;">üè† Voltar ao In√≠cio</button>
            </div>
          </div>
        </div>

        <div style="margin-top:14px; font-size:13px; color:#888">Dica: escolhe com calma ‚Äî cada escolha revela algo que
          j√° sabemos sobre ti ‚ô•</div>
        <div class="overlay" aria-hidden="true"></div>
      </div>

      <!-- Canvas para confetti -->
      <canvas id="confettiCanvas" class="hidden"></canvas>

      <!-- ====== JavaScript da surpresa (auto-contido) ====== -->
      <script>
        (function () {
          // Elementos
          const s1 = document.getElementById('stage-1');
          const s2 = document.getElementById('stage-2');
          const s3 = document.getElementById('stage-3');
          const final = document.getElementById('final-stage');
          const finalText = document.getElementById('finalText');
          const btnPrayer = document.getElementById('btn-prayer');
          const btnTY = document.getElementById('btn-ty');
          const btnBack = document.getElementById('btn-back');
          const confCanvas = document.getElementById('confettiCanvas');

          // state
          let chosen = { q1: null, q2: null, q3: null };

          // helper: show/hide with nice reveal
          function show(el) {
            el.classList.remove('hidden');
            setTimeout(() => el.classList.add('show'), 40);
            el.setAttribute('aria-hidden', 'false');
          }
          function hide(el) {
            el.classList.remove('show');
            setTimeout(() => el.classList.add('hidden'), 340);
            el.setAttribute('aria-hidden', 'true');
          }

          // stage 1 interactions
          s1.querySelectorAll('.choice').forEach(ch => {
            ch.addEventListener('click', () => handleQ1(ch.dataset.answer));
            ch.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') handleQ1(ch.dataset.answer); });
          });

          function handleQ1(ans) {
            chosen.q1 = ans;
            // feedback text
            if (ans === 'B') {
              // correct "insightful" choice
              showTinyToast("A tua for√ßa √© persist√™ncia ‚Äî seguimos.");
            } else {
              showTinyToast("Mesmo assim, o teu cora√ß√£o √© incr√≠vel.");
            }
            // move to stage 2
            hide(s1);
            setTimeout(() => show(s2), 420);
          }

          // stage 2
          s2.querySelectorAll('.choice').forEach(ch => {
            ch.addEventListener('click', () => handleQ2(ch.dataset.answer));
            ch.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') handleQ2(ch.dataset.answer); });
          });

          function handleQ2(ans) {
            chosen.q2 = ans;
            if (ans === 'sweet') {
              showTinyToast("Doce ‚Äî a escolha que revela o teu jeito.");
            } else {
              showTinyToast("Cada sabor diz algo bonito sobre ti.");
            }
            hide(s2);
            setTimeout(() => show(s3), 420);
          }

          // stage 3
          s3.querySelectorAll('.choice').forEach(ch => {
            ch.addEventListener('click', () => handleQ3(ch.dataset.answer));
            ch.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') handleQ3(ch.dataset.answer); });
          });

          function handleQ3(ans) {
            chosen.q3 = ans;
            hide(s3);
            setTimeout(() => revealFinal(), 480);
          }

          // tiny toast for feedback
          function showTinyToast(text) {
            const t = document.createElement('div');
            t.textContent = text;
            t.style.position = 'fixed';
            t.style.left = '50%';
            t.style.transform = 'translateX(-50%)';
            t.style.bottom = '38px';
            t.style.background = 'linear-gradient(135deg,#fff,#fff5f7)';
            t.style.padding = '10px 16px';
            t.style.borderRadius = '12px';
            t.style.boxShadow = '0 10px 30px rgba(0,0,0,0.12)';
            t.style.fontWeight = '700';
            t.style.color = '#6b3547';
            t.style.zIndex = '9999';
            document.body.appendChild(t);
            setTimeout(() => t.style.opacity = '0', 1800);
            setTimeout(() => t.remove(), 2300);
          }

          // Final reveal content (friendship + prayer/b√™n√ß√£o)
          function revealFinal() {
            // Prepare final text (tailored tone: reserved & sweet)
            const part1 = "F√°bia, tu √©s mais do que parece. Por fora, uma armadura que protege. Por dentro, um cora√ß√£o que sabe amar.";
            const part2 = "A tua do√ßura aparece nos gestos tranquilos, nas pequenas coisas, no cuidado que s√≥ quem te conhece percebe.";
            const friendship = "Obrigado por seres essa amiga verdadeira ‚Äî por cada sil√™ncio que fala, por cada gesto discreto que sustenta. A tua amizade √© um presente que ilumina muitos dias.";
            const prayer = "Que Deus te cubra de paz, te d√™ for√ßa nos dias dif√≠ceis, e multiplique a tua alegria. Que a f√© te sustente, a esperan√ßa te guie, e o amor te acompanhe sempre.";

            // set final text gradually
            finalText.innerHTML = `<p style="font-weight:700; color:#5a2b3b; margin-bottom:6px;">${part1}</p>
                               <p style="color:#533042; margin-bottom:6px;">${part2}</p>
                               <hr style="border:none;border-top:1px dashed rgba(85,38,56,0.06);margin:8px 0;">
                               <p style="font-weight:700;color:#6b2f47;margin-bottom:6px;">${friendship}</p>
                               <p style="color:#3f2a33;margin-bottom:0;">${prayer}</p>`;

            // show final area
            show(final);

            // animate cake (simple subtle)
            const cake = document.getElementById('cake');
            cake.animate([
              { transform: 'translateY(10px) scale(.98)' },
              { transform: 'translateY(0px) scale(1)' },
              { transform: 'translateY(6px) scale(.995)' },
              { transform: 'translateY(0px) scale(1)' }
            ], { duration: 1600, iterations: Infinity });

            // start confetti + gentle music-like chime (web audio)
            startConfetti();
            playChime();

            // show actions
            document.getElementById('btn-prayer').style.display = 'inline-block';
            document.getElementById('btn-ty').style.display = 'inline-block';
            btnBack.style.display = 'inline-block';
          }

          // Buttons: prayer shows slightly different emphasis text in modal-like reveal
          btnPrayer.addEventListener('click', () => {
            finalText.innerHTML = `<p style="font-weight:700;color:#5a2b47;">Uma pequena ora√ß√£o para ti</p>
          <p style="color:#3f2a33;">Senhor, aben√ßoa a F√°bia com paz, d√°-lhe for√ßa para cada manh√£, alegria nas pequenas vit√≥rias e serenidade no cora√ß√£o. Am√©m.</p>`;
            showTinyToast("B√™n√ß√£o enviada ü§ç");
          });

          btnTY.addEventListener('click', () => {
            finalText.innerHTML = `<p style="font-weight:700;color:#6b2f47;">Obrigado por existires, F√°bia</p><p style="color:#3f2a33;">A tua amizade √© um farol ‚Äî que ilumina sem pedir nada em troca. Obrigado por seres tu.</p>`;
            showTinyToast("Mensagem de amizade destacada üíå");
          });

          btnBack.addEventListener('click', () => {
            // stop confetti & audio
            stopConfetti();
            stopChime();
            // return to home
            const homeBtn = document.querySelector("nav button[onclick=\"showPage('home')\"]");
            if (homeBtn) homeBtn.click();
            else window.location.hash = ''; // fallback
          });

          // ---------------- Confetti (lightweight) ----------------
          let confettiInterval = null;
          function startConfetti() {
            confCanvas.classList.remove('hidden');
            const ctx = confCanvas.getContext('2d');
            confCanvas.width = window.innerWidth;
            confCanvas.height = window.innerHeight;
            const pieces = [];
            const colors = ['#ffd6e0', '#ffdbe6', '#ff9fb8', '#ff7aa8', '#e86b93', '#ffd0dd'];

            for (let i = 0; i < 120; i++) {
              pieces.push({
                x: Math.random() * confCanvas.width,
                y: Math.random() * -confCanvas.height,
                w: 6 + Math.random() * 10,
                h: 8 + Math.random() * 12,
                r: Math.random() * 360,
                color: colors[Math.floor(Math.random() * colors.length)],
                speed: 1 + Math.random() * 3,
                rotSpeed: (Math.random() - 0.5) * 8
              });
            }

            function draw() {
              ctx.clearRect(0, 0, confCanvas.width, confCanvas.height);
              for (const p of pieces) {
                p.y += p.speed;
                p.x += Math.sin(p.y * 0.01) * 1.2;
                p.r += p.rotSpeed * 0.02;
                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.r * Math.PI / 180);
                ctx.fillStyle = p.color;
                ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
                ctx.restore();

                if (p.y > confCanvas.height + 30) {
                  p.y = -20 - Math.random() * confCanvas.height;
                  p.x = Math.random() * confCanvas.width;
                }
              }
            }

            confettiInterval = setInterval(draw, 1000 / 60);
          }

          function stopConfetti() {
            confCanvas.classList.add('hidden');
            if (confettiInterval) { clearInterval(confettiInterval); confettiInterval = null; }
          }

          // ---------------- Subtle chime using WebAudio ----------------
          let audioCtx, osc;
          function playChime() {
            try {
              audioCtx = new (window.AudioContext || window.webkitAudioContext)();
              osc = audioCtx.createOscillator();
              const gain = audioCtx.createGain();
              osc.type = 'sine';
              osc.frequency.setValueAtTime(520, audioCtx.currentTime);
              gain.gain.setValueAtTime(0, audioCtx.currentTime);
              osc.connect(gain);
              gain.connect(audioCtx.destination);
              gain.gain.linearRampToValueAtTime(0.02, audioCtx.currentTime + 0.02);
              osc.start();
              gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 6);
              setTimeout(() => { if (osc) osc.stop(); }, 6200);
            } catch (e) { /* no audio available */ }
          }
          function stopChime() {
            try { if (osc) { osc.stop(); osc = null; } if (audioCtx) { audioCtx.close(); audioCtx = null; } } catch (e) { }
          }

          // Accessibility: keyboard support for first stage (focus first)
          setTimeout(() => {
            const first = s1.querySelector('.choice');
            if (first) first.focus();
          }, 350);

          // ensure canvas resizes
          window.addEventListener('resize', () => {
            if (!confCanvas.classList.contains('hidden')) {
              confCanvas.width = window.innerWidth;
              confCanvas.height = window.innerHeight;
            }
          });

          // close/start safety: stop audio/confetti when leaving page
          window.addEventListener('pagehide', () => { stopConfetti(); stopChime(); });
        })();
      </script>
    </div>
    <!-- ======= FIM da nova se√ß√£o SURPRESA ======= -->

    <!-- Cora√ß√µes animados -->
    <script>
      function createHeart() {
        const heart = document.createElement('div');
        heart.classList.add('heart');
        heart.innerHTML = '‚ù§';
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.animationDuration = 3 + Math.random() * 5 + 's';
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 8000);
      }

      setInterval(createHeart, 350);

      // üíå Mensagens de Felicita√ß√£o, Carinho e Conselho
      const mensagens = [
        "üéâ F√°bia, que este novo ano da sua vida seja cheio de vit√≥rias, sa√∫de, amor e muitos sonhos realizados!",
        "üíñ Voc√™ √© uma pessoa iluminada, de cora√ß√£o puro e sorriso que transforma qualquer dia em algo especial.",
        "üåü Nunca duvide da sua for√ßa. Voc√™ √© capaz de coisas incr√≠veis, mesmo nos dias em que n√£o se sente assim.",
        "üôè Que Deus te cubra de b√™n√ß√£os hoje e sempre, te guiando por caminhos de paz e felicidade.",
        "üåà Nos dias dif√≠ceis, lembre-se que tudo passa, mas a sua luz permanece.",
        "‚ú® Que a sua vida seja leve, colorida e cheia de momentos que aquecem o cora√ß√£o.",
        "üíé Conselho de amigo: acredite mais em voc√™, porque voc√™ j√° √© incr√≠vel do jeito que √©.",
        "ü•∞ Que nunca lhe falte amor, carinho, amigos verdadeiros e motivos para sorrir.",
        "üéÇ Parab√©ns, F√°bia! Que cada novo dia seja um presente maravilhoso para a sua vida!"
      ];

      let indiceMensagem = 0;
      const elementoMensagem = document.getElementById('mensagemRotativa');

      function mostrarMensagem() {
        elementoMensagem.textContent = mensagens[indiceMensagem];
        indiceMensagem = (indiceMensagem + 1) % mensagens.length;
      }

      function proximaMensagem() {
        mostrarMensagem();
      }

      // Auto troca a cada 5 segundos
      mostrarMensagem();
      setInterval(mostrarMensagem, 5000);

      function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
      }

      // üéûÔ∏è CARROSSEL AUTOM√ÅTICO SUAVE
      let slides = document.querySelectorAll(".slide");
      let indexSlide = 0;

      function trocarSlide() {
        slides.forEach(slide => slide.classList.remove("active"));
        slides[indexSlide].classList.add("active");
        indexSlide = (indexSlide + 1) % slides.length;
      }
      setInterval(trocarSlide, 5000); // Troca lenta e suave a cada 5 segundos

      // üéÆ JOGO DO CORA√á√ÉO
      let massa = "";
      let recheio = "";

      function escolherMassa(opcao) {
        massa = opcao;
        document.getElementById("etapa1").style.display = "none";
        document.getElementById("etapa2").style.display = "block";
      }

      function escolherRecheio(opcao) {
        recheio = opcao;
        document.getElementById("etapa2").style.display = "none";
        document.getElementById("etapa3").style.display = "block";
      }

      function finalizarBolo(cobertura) {
        document.getElementById("etapa3").style.display = "none";
        document.getElementById("resultado").style.display = "block";

        document.getElementById("boloFinal").innerHTML = `
      üéÇ Seu bolo perfeito foi criado assim:<br><br>
      üßÅ Massa: <b>${massa}</b><br>
      üçÆ Recheio: <b>${recheio}</b><br>
      üçì Cobertura: <b>${cobertura}</b><br><br>
      O bolo ficou simplesmente‚Ä¶ INCR√çVEL! Assim como voc√™ üíñ
    `;
      }
    </script>

</body>

</html>
